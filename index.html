<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>⚡ Test de la rueda - ¡A Jugar!</title>
    <style>
        /* Variables y Reset - Optimizadas para un look de juego */
        :root {
            --bg-color: #1a004b; /* Púrpura oscuro para fondo de juego */
            --card-bg-color: rgba(30, 0, 70, 0.8);
            --border-color: #7f00ff; /* Púrpura brillante */
            --text-color: #f9fafb;
            --subtitle-color: #d1d5db;
            --primary-purple: #9b5cf6; /* Morado claro */
            --primary-pink: #ec4899; /* Rosa fuerte */
            --timer-start-color: #4ade80; /* Verde - OK */
            --timer-end-color: #ff3333; /* Rojo - ¡PELIGRO! */
            --answer-color-hover: #ffcc00; /* Dorado para resaltar */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            background-image: linear-gradient(135deg, var(--bg-color) 0%, #3a006f 100%);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            text-align: center;
        }

        .container {
            width: 100%;
            max-width: 650px;
            position: relative;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        .card {
            background-color: var(--card-bg-color);
            backdrop-filter: blur(5px);
            border: 2px solid var(--border-color);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .title {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary-purple), var(--primary-pink));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.25rem;
            color: var(--subtitle-color);
            margin-bottom: 2rem;
        }
        
        /* Estilos del QUIZ - Foco en la urgencia y lo visual */
        .quiz-header {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .question-counter {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary-purple);
            margin-bottom: 0.5rem;
            transition: color 0.2s ease-in-out; /* Transición para el blink */
        }

        /* Animación de Parpadeo (Blink) - Nivel "Jeopardy" */
        @keyframes blink-animation {
            to { color: var(--timer-end-color); text-shadow: 0 0 10px var(--timer-end-color); }
        }
        .blinking {
            animation: blink-animation 0.3s steps(2, start) infinite alternate;
        }

        /* Barra de Tiempo Dinámica */
        .timer-bar-container {
            width: 100%;
            height: 12px;
            background-color: #374151;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .timer-bar {
            height: 100%;
            width: 100%;
            background-image: linear-gradient(to right, var(--timer-start-color), var(--timer-end-color));
            border-radius: 6px;
            transition: width 0.1s linear;
        }

        .question-text {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--answer-color-hover);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        /* Cuadrícula 2x2 - SIMULACIÓN RUEDA/MOBILE-FIRST DEFAULT */
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2x2 por defecto */
            gap: 1.25rem;
        }

        .answer-card {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            aspect-ratio: 1 / 1; /* Cuadrado perfecto (RUEDA) */
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 1rem;
            background-color: #374151;
            border: 3px solid transparent;
        }
        .answer-card:hover {
            transform: scale(1.03);
            box-shadow: 0 0 20px var(--answer-color-hover), 0 0 10px rgba(255, 255, 255, 0.5);
            border-color: var(--answer-color-hover);
        }

        .answer-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.7;
            transition: transform 0.5s ease;
        }

        .answer-card:hover .answer-image {
            transform: scale(1.05);
            opacity: 1;
        }

        .answer-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 70%);
            z-index: 1;
        }

        .answer-text {
            position: relative;
            z-index: 2;
            font-size: 0.95rem; /* Tamaño base */
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 1);
            text-align: left;
        }

        /* Media Query para Móviles PEQUEÑOS (<480px) */
        @media (max-width: 480px) {
            .card {
                padding: 1rem;
            }
            .title {
                font-size: 2rem;
            }
            .question-text {
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }
            
            /* FUERZA 2X2 Y ADAPTACIÓN DE TEXTO */
            .answers-grid {
                grid-template-columns: 1fr 1fr; /* Mantiene 2x2 */
                gap: 0.75rem;
            }
            .answer-card {
                aspect-ratio: 1 / 1; /* Mantiene cuadrado (ruleta) */
                padding: 0.5rem; /* Menor padding */
            }
            .answer-text {
                font-size: 0.65rem; /* Texto MUY pequeño para no estorbar la imagen */
                line-height: 1.2;
            }
            .answer-image {
                 display: block;
                 opacity: 0.6;
            }
        }
        /* ... (Resto de estilos no modificados) ... */
    </style>
</head>
<body>

    <main class="container">
        <div id="start-screen" class="screen active">
            <div class="card">
                <h1 class="title">¡TEST DE PREGUNTAS!</h1>
                <p class="subtitle">Descubre tu personalidad en 15 preguntas ultrarrápidas. ¡Tienes **5 segundos por pregunta!**</p>
                <form id="start-form">
                    <input type="text" id="name-input" placeholder="Ingresa tu nombre de Jugador" class="name-input" autocomplete="off" />
                    <button type="submit" class="btn">¡QUE EMPIECE EL JUEGO!</button>
                </form>
            </div>
        </div>

        <div id="quiz-screen" class="screen">
            <div class="card">
                <div class="quiz-header">
                    <p id="question-counter" class="question-counter"></p>
                    <div class="timer-bar-container">
                        <div id="timer-bar" class="timer-bar"></div>
                    </div>
                </div>
                <h2 id="question-text" class="question-text"></h2>
                <div id="answers-grid" class="answers-grid">
                    </div>
            </div>
        </div>

        <div id="result-screen" class="screen">
            <div class="card">
                <p id="congrats-message" class="subtitle"></p>
                <h2 class="result-title">
                    Tu <span class="title">Personalidad</span> es: <br><span id="personality-name"></span>
                </h2>
                <div class="result-description-box">
                    <p id="personality-description"></p>
                </div>
                <p class="final-score">Puntuación Final: <span id="final-score" class="font-bold"></span></p>
                <button id="restart-btn" class="btn">Jugar de Nuevo</button>
            </div>
        </div>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // =================================================================================
        // DATOS DEL CUESTIONARIO (Se mantienen como en tu archivo original)
        // =================================================================================
        const QUIZ_QUESTIONS = [
            {
                question: "¿Si alguien hiciera una película basada en tu vida, de qué género sería?",
                answers: [
                    { text: "Una comedia romántica con un final feliz, el amor gana.", score: 20 },
                    { text: "Una película muda en blanco y negro, soy ha sido elegante.", score: 40 },
                    { text: "Varios cortos graciosos, mi vida es demasiado divertida.", score: 10 },
                    { text: "Una película de superhéroes, planeo salvar el mundo.", score: 30 },
                ],
            },
            {
                question: "¿Cuál es tu lugar feliz?",
                answers: [
                    { text: "La biblioteca, me teletransporta a mi mundo imaginario.", score: 40 },
                    { text: "Mi casa, mi familia siempre está ahí para ayudar.", score: 10 },
                    { text: "En algún lugar junto al mar, puedo contarle mis problemas y me ayuda.", score: 30 },
                    { text: "En medio de una multitud, me gusta observar la vida.", score: 20 },
                ],
            },
            {
                question: "¿Mira a tu alrededor qué color prevalece en tu habitación?",
                answers: [
                    { text: "Verde o azul, me mantienen equilibrado y me ayudan a relajarse.", score: 30 },
                    { text: "Una mezclade colores brillantes, nunca puedo elegir sólo uno.", score: 10 },
                    { text: "Blanco, limpio ordenado sin distracciones.", score: 40 },
                    { text: "Prefiero los patrones a los colores.", score: 20 },
                ],
            },
            {
                question: "¿Cómo sería tu logotipo personal?",
                answers: [
                    { text: "Un león sentado orgullosamente en un trono, divertido.", score: 20 },
                    { text: "Unicornio montado en un arco iris.", score: 40 },
                    { text: "Solo mis iniciales, me gustan mantenerme oficial.", score: 10 },
                    { text: "El globo terráqueo con mi retrato, soy un trotamundos.", score: 30 },
                ],
            },
            {
                question: "¿Cuál de estos animales elegirías como mascota?",
                answers: [
                    { text: "Un cachorro, era un amigo fiel y esponjosito.", score: 10 },
                    { text: "Un gatito, gatos para siempre.", score: 20 },
                    { text: "Un panda, quiero salir en televisión con el.", score: 40 },
                    { text: "Una tortuga, lenta pero sabia.", score: 30 },
                ],
            },
            {
                question: "¿Cuál es tu peor cualidad?",
                answers: [
                    { text: "Soy demasiado emocional, trabajo-familia me preocupo mucho por todo.", score: 10 },
                    { text: "Planeo demasiado, cuando las cosas no funcionan me entristece mucho.", score: 30 },
                    { text: "No es fácil para mí confiar en las personas, por eso no puedo hacer amigos.", score: 40 },
                    { text: "Soy imparable, no tengo un botón de parada cuando quiero algo lo consigo pase lo que pase.", score: 20 },
                ],
            },
            {
                question: "¿Qué no perdonaría nunca?",
                answers: [
                    { text: "Que mi mejor amigo me mienta.", score: 10 },
                    { text: "Que alguien más se atribuye el mérito de todo mi trabajo.", score: 20 },
                    { text: "Que mis amigos hablen mal de mí a mis espaldas.", score: 30 },
                    { text: "Que mi pareja no me apoye en la persecución de mis sueños.", score: 40 },
                ],
            },
            {
                question: "¿Si tuvieras que comer un alimento por el resto de tu vida cuál sería?",
                answers: [
                    { text: "Pizza, pasta, este tipo de cosas.", score: 20 },
                    { text: "Vegetales, son buenos y saludables.", score: 40 },
                    { text: "Postres, creo que sobreviviré con postres.", score: 30 },
                    { text: "Comida chatarra por siempre.", score: 10 },
                ],
            },
            {
                question: "¿Dónde te encuentras más a menudo en tus sueños?",
                answers: [
                    { text: "En algún lugar de mi pasado, estos recuerdos me hacen sonreír.", score: 40 },
                    { text: "Algún país exótico, en el que nunca ha estado amo viajar.", score: 30 },
                    { text: "Escuela, sigo teniendo esta pesadilla.", score: 10 },
                    { text: "En un escenario, obteniendo ese merecido premio.", score: 20 },
                ],
            },
            {
                question: "¿Acabas de recibir un nuevo escritorio para computadora, podrías?:",
                answers: [
                    { text: "Seguir el manual al pie de la letra para armarlo.", score: 10 },
                    { text: "Llamar a alguien que sepa cómo hacerlo.", score: 20 },
                    { text: "Experimentar, lo lograré eventualmente.", score: 40 },
                    { text: "Porqué compraría un escritorio, puedo construirlo yo mismo.", score: 30 },
                ],
            },
            {
                question: "¿Te mudas a una nueva casa, de que te ocuparías primero?",
                answers: [
                    { text: "Mi dormitorio, es la parte más importante de la casa.", score: 10 },
                    { text: "La sala de estar, no puedo esperar para hacer una fiesta.", score: 20 },
                    { text: "La cocina, me encanta cocinar y no puedo hacerlo en medio de un desastre.", score: 30 },
                    { text: "El patio trasero, plantar y algunos árboles y flores.", score: 40 },
                ],
            },
            {
                question: "¿Cómo te sentiste hoy cuando te despertaste?",
                answers: [
                    { text: "Listo para conquistar el mundo y lleno de energía.", score: 30 },
                    { text: "Un poco enojado, los problemas de ayer me están molestando demasiado.", score: 20 },
                    { text: "No recuerdo así que nada especial supongo.", score: 10 },
                    { text: "Cansado como siempre, nunca puedo dormir lo suficiente.", score: 40 },
                ],
            },
            {
                question: "No puedes terminar un proyecto en equipo a tiempo, ¿qué vas a hacer?",
                answers: [
                    { text: "Hacer mi parte, entregarla y ver lo que dice el jefe.", score: 20 },
                    { text: "Tratar de encontrar una solución inteligente.", score: 40 },
                    { text: "Culpar a los demás y decir que hice lo mejor que pude.", score: 30 },
                    { text: "Inventar una historia loca sobre, porque no terminamos a tiempo.", score: 10 },
                ],
            },
            {
                question: "Estás de excursión con tus amigos, uno de ellos no puede subir a la cima de la montaña, ¿qué haces?",
                answers: [
                    { text: "Regresar, a todo el grupo.", score: 10 },
                    { text: "Dividirse, algunas personas realmente querían observar esa vista.", score: 20 },
                    { text: "Subir solo, sin importar lo que decidan los demás.", score: 40 },
                    { text: "Dejar a esa persona sola y luego volver por ella.", score: 30 },
                ],
            },
            {
                question: "¿Ya debes tener sed, elige una bebida para llevar?",
                answers: [
                    { text: "Un batido, por favor.", score: 30 },
                    { text: "Sólo agua.", score: 20 },
                    { text: "No puedo vivir sin café.", score: 40 },
                    { text: "Elegir un refresco.", score: 10 },
                ],
            },
        ];

        const PERSONALITY_RESULTS = [
            { name: "Personalidad Verde", minScore: 150, maxScore: 230, description: "Eres solidario, leal, con habilidades excepcionales para la comunicación, puedes leer las emociones de los demás y compartir tu energía curativa positiva, siempre encuentras la solución más original a cualquier problema, te sientes igual de bien entre la gente.", color: "#4ade80" },
            { name: "Personalidad Morado", minScore: 240, maxScore: 330, description: "Eres lógico, serio y estás en perfecto equilibrio entre tu cuerpo y tu mente, puedes resolver cualquier conflicto y la gente acude a ti para pedirte consejo, eres misterioso único e increíblemente, interesante por naturaleza a través a otros, disfrutas la lectura y eres muy sabio para tu edad.", color: "#a78bfa" },
            { name: "Personalidad Roja", minScore: 340, maxScore: 420, description: "Energía y pasión son las dos palabras que mejor te describen, puedes lidiar con cualquier proyecto, la gente confía en ti y sigue tu impulso, el amor y las relaciones son importantes para ti, eres el alma de cualquier fiesta, nada puede asustarse o detenerte.", color: "#f87171" },
            { name: "Personalidad Azul", minScore: 430, maxScore: 509, description: "Eres un explorador natural, nunca te lo piensas dos veces, si alguien te ofrece probar algo nuevo o ir a un lugar nuevo vives todos los días al máximo y no te arrepientes, también eres una persona muy amable y siempre ayudarás a un amigo sin importar lo que te cueste.", color: "#60a5fa" },
            { name: "Personalidad Blanco", minScore: 510, maxScore: Infinity, description: "Eres un artista de corazón, crear algo con las manos o la mente te hace más feliz, puedes parecer tímido, pero eso se debe a que siempre estás en el mundo de los sueños, ves belleza en las pequeñas cosas y quieres hacer del mundo un lugar mejor.", color: "#e5e7eb" }
        ];

        const QUESTION_TIMER_SECONDS = 5; 
        
        // =================================================================================
        // LÓGICA DE LA APLICACIÓN Y BLINK
        // =================================================================================
        let currentQuestionIndex = 0;
        let score = 0;
        let userName = '';
        let timerTimeout;
        let blinkTimeout; // Nuevo timeout para el blink

        // Elementos del DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const startForm = document.getElementById('start-form');
        const nameInput = document.getElementById('name-input');
        const questionCounter = document.getElementById('question-counter');
        const timerBar = document.getElementById('timer-bar');
        const questionText = document.getElementById('question-text');
        const answersGrid = document.getElementById('answers-grid');
        const congratsMessage = document.getElementById('congrats-message');
        const personalityName = document.getElementById('personality-name');
        const personalityDescription = document.getElementById('personality-description');
        const finalScore = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');

        const answerMap = ['a', 'b', 'c', 'd'];

        // Event Listeners
        startForm.addEventListener('submit', (e) => {
            e.preventDefault();
            userName = nameInput.value.trim() || 'Jugador Audaz';
            startQuiz();
        });
        restartBtn.addEventListener('click', restartQuiz);

        // Funciones de control de pantalla
        function switchScreen(activeScreen) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            activeScreen.classList.add('active');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            switchScreen(quizScreen);
            displayQuestion();
        }
        
        function restartQuiz() {
            nameInput.value = '';
            switchScreen(startScreen);
        }

        // Función principal para mostrar la pregunta
        function displayQuestion() {
            if (currentQuestionIndex >= QUIZ_QUESTIONS.length) {
                showResult();
                return;
            }

            clearTimeout(timerTimeout);
            clearTimeout(blinkTimeout); // Limpiar blink
            questionCounter.classList.remove('blinking'); // Quitar efecto blink

            const questionData = QUIZ_QUESTIONS[currentQuestionIndex];
            const questionNumber = currentQuestionIndex + 1; // 1 a 15
            
            questionCounter.textContent = `PREGUNTA ${questionNumber} / ${QUIZ_QUESTIONS.length} - ¡CORRE EL TIEMPO!`;
            questionText.textContent = questionData.question;
            answersGrid.innerHTML = '';

            // Generar las cartas de respuesta con la ruta de imagen dinámica
            questionData.answers.forEach((answer, index) => {
                const answerLetter = answerMap[index];
                const imagePath = `img/${questionNumber}${answerLetter}.GIF`; // Formato: img/1a.PNG, img/2b.PNG, etc.
                
                const answerCard = document.createElement('div');
                answerCard.className = 'answer-card';
                
                answerCard.innerHTML = `
                    <img src="${imagePath}" alt="Opción ${answerLetter.toUpperCase()} de la pregunta ${questionNumber}" class="answer-image" onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg%20width%3D%22100%22%20height%3D%22100%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22100%22%20height%3D%22100%22%20fill%3D%22%234b5563%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20text-anchor%3D%22middle%22%20fill%3D%22white%22%20font-size%3D%2216%22%3E${questionNumber}${answerLetter.toUpperCase()}%3C%2Ftext%3E%3C%2Fsvg%3E';">
                    <div class="answer-overlay"></div>
                    <p class="answer-text">${answerLetter.toUpperCase()}: ${answer.text}</p>
                `;
                // Manejar la selección de respuesta
                answerCard.addEventListener('click', () => selectAnswer(answer.score, answerCard));
                answersGrid.appendChild(answerCard);
            });
            
            startTimer();
        }
        
        // Lógica del Temporizador con Alerta y Blink
        function startTimer() {
            timerBar.style.transition = 'none';
            timerBar.style.width = '100%';

            void timerBar.offsetWidth; // Forzar reflow

            timerBar.style.transition = `width ${QUESTION_TIMER_SECONDS}s linear`;
            timerBar.style.width = '0%';
            
            // BLINK: Empezar a parpadear cuando queden 2 segundos
            const blinkTime = (QUESTION_TIMER_SECONDS - 2) * 1000; 

            blinkTimeout = setTimeout(() => {
                questionCounter.classList.add('blinking');
            }, blinkTime);


            timerTimeout = setTimeout(() => {
                // El tiempo se agotó: Alerta y 0 puntos
                questionCounter.classList.remove('blinking');
                alert(`¡Se acabó el tiempo, ${userName}! Debe seleccionar una opción urgentemente. Sumas 0 puntos por esta. ⏱️`);
                selectAnswer(0); 
            }, QUESTION_TIMER_SECONDS * 1000);
        }

        function selectAnswer(answerScore, selectedElement = null) {
            clearTimeout(timerTimeout);
            clearTimeout(blinkTimeout); // Detener blink al responder
            questionCounter.classList.remove('blinking');
            
            score += answerScore;
            
            // Deshabilitar todas las opciones para evitar doble clic
            const allCards = answersGrid.querySelectorAll('.answer-card');
            allCards.forEach(card => card.classList.add('disabled'));

            // Resaltar la respuesta seleccionada (solo si se seleccionó una)
            if (selectedElement) {
                selectedElement.style.border = '3px solid #4ade80'; // Borde verde para la opción elegida
                selectedElement.style.transform = 'scale(1.03)';
                selectedElement.style.boxShadow = '0 0 20px #4ade80';
            }

            // Pequeño retraso para que el usuario vea su elección antes de avanzar
            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
            }, 500); 
        }

        // Función para mostrar resultados
        function showResult() {
            const result = PERSONALITY_RESULTS.find(r => score >= r.minScore && score <= r.maxScore) || PERSONALITY_RESULTS[PERSONALITY_RESULTS.length - 1];
            
            congratsMessage.textContent = `¡Juego Terminado, ${userName}!`;
            personalityName.textContent = result.name;
            personalityName.style.color = result.color;
            personalityDescription.textContent = result.description;
            finalScore.textContent = score;

            switchScreen(resultScreen);
        }
    });
    </script>
</body>
</html>